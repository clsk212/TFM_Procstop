{% extends "base.html" %}

{% block title %}Analytics Page{% endblock %}

{% block content %}
<div class="analytics-container" style="margin-bottom: 35px; margin-top: 35px;">

    <!-- Tabs to select the chart -->
    <div class="analytics-tab">
        <button class="tablinks" onclick="openTab(event, 'EmotionPie')">Emotion Pie Chart</button>
        <button class="tablinks" onclick="openTab(event, 'EmotionEvolution')">Emotion Evolution</button>
        <button class="tablinks" onclick="openTab(event, 'Sentiments')">Sentiments Over Time</button>
        <button class="tablinks" onclick="openTab(event, 'HateSpeech')">Hate Speech Evolution</button>
        <button class="tablinks" onclick="openTab(event, 'Irony')">Irony Evolution</button>
        <button class="tablinks" onclick="openTab(event, 'MostPositive')">Most Positive Entities</button>
        <button class="tablinks" onclick="openTab(event, 'LeastPositive')">Least Positive Entities</button>
    </div>

    <!-- Content of each tab -->
    <div id="EmotionPie" class="analytics-tabcontent">
        <img src="{{ url_for('emotion_pie_chart') }}" alt="Emotion Pie Chart">
    </div>

    <div id="EmotionEvolution" class="analytics-tabcontent">
        <img src="{{ url_for('emotion_evolution') }}" alt="Emotion Evolution Plot">
    </div>

    <div id="Sentiments" class="analytics-tabcontent">
        <img src="{{ url_for('sentiments_plot') }}" alt="Sentiments Evolution Plot">
    </div>

    <div id="HateSpeech" class="analytics-tabcontent" style="display: table-caption;">
        <img src="{{ url_for('hate_speech_evolution') }}" alt="Hate Speech Evolution Plot">
    </div>

    <div id="Irony" class="analytics-tabcontent" style="display: table-caption;">
        <img src="{{ url_for('irony_evolution') }}" alt="Irony Evolution Plot">
    </div>

    <div id="MostPositive" class="analytics-tabcontent" style="display: table-caption;">
        <img src="{{ url_for('most_positive_entities') }}" alt="Most Positive Entities Barplot">
    </div>

    <div id="LeastPositive" class="analytics-tabcontent" style="display: table-caption;">
        <img src="{{ url_for('least_positive_entities') }}" alt="Least Positive Entities Barplot">
    </div>
</div>

<script>
// Function to switch between tabs
function openTab(evt, tabName) {
    var i, tabcontent, tablinks;

    // Hide all tab content
    tabcontent = document.getElementsByClassName("analytics-tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Remove the ‘active’ class from all the buttons.
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    // Show the current tab and add the class ‘active’ to the button that has been clicked.
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
}

// Show the first tab by default
document.getElementsByClassName("tablinks")[0].click();
</script>
{% endblock %}
